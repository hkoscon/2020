{"version":3,"sources":["webpack:///./utils/fetchTopic.js","webpack:///./pages/timetable.vue?7644","webpack:///./pages/timetable.vue?934f","webpack:///pages/timetable.vue","webpack:///./pages/timetable.vue"],"names":["fetchDays","axios","get","process","then","_ref","days","data","fetchEventInfo","_ref2","conference","fetchTopics","_ref3","keys","Map","flatMap","day","timeslots","_ref4","events","filter","topic","has","internal","set","sort","left","right","display","localeCompare","fetchTopicById","id","_ref5","map","forEach","_ref6","date","_ref7","startTime","endTime","e","Object","_babel_runtime_helpers_esm_typeof__WEBPACK_IMPORTED_MODULE_5__","replace","toLowerCase","u","url","parse","path","basename","pathname","topicSlug","_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","pages_timetablevue_type_script_lang_js_","name","head","title","meta","hid","property","content","components","ScheduleTable","__webpack_require__","bind","PageBanner","asyncData","fetchTopic","component","componentNormalizer","_h","this","$createElement","_c","_self","staticClass","attrs","_v","length","_e","__webpack_exports__"],"mappings":"0VAKe,SAASA,IAOtB,OAAOC,IAAMC,IAA8DC,6BACxEC,KAAK,SAAAC,GAAA,MAAyB,CAAEC,KAA3BD,EAAGE,KAAQD,QAGd,SAASE,IAOd,OAAOP,IAAMC,IAA8DC,8BACxEC,KAAK,SAAAK,GAAA,MAA+B,CAAEC,WAAjCD,EAAGF,KAAQG,cAUd,SAASC,IACd,OAAOX,IACJI,KAAK,SAAAQ,GAAc,IAAXN,EAAWM,EAAXN,KACDO,EAAO,IAAIC,IACjB,OAAOC,IACLT,EACA,SAAAU,GAAG,OAAID,IAAQC,EAAIC,UAAW,SAAAC,GAAA,OAAAA,EAAGC,WAEhCC,OAAO,SAACC,GACP,SAAKA,IAAUA,EAAMA,UAIjBR,EAAKS,IAAID,EAAME,YAGnBV,EAAKW,IAAIH,EAAME,UAAU,IAClB,MAERE,KAAK,SAACC,EAAMC,GAAP,OAAiBD,EAAKE,QAAQC,cAAcF,EAAMC,aAIzD,SAASE,EAAeC,GAC7B,OAAO/B,IACJI,KAAK,SAAA4B,GAAc,IAAX1B,EAAW0B,EAAX1B,KACD2B,IAAM,IAAInB,IAehB,OAdAR,EAAK4B,QAAQ,SAAAC,GAA8B,IAA3BnB,EAA2BmB,EAA3BnB,IAAKoB,EAAsBD,EAAtBC,KAAsBD,EAAhBlB,UACfiB,QAAQ,SAAAG,GAAoC,IAAjCC,EAAiCD,EAAjCC,UAAWC,EAAsBF,EAAtBE,QAAsBF,EAAblB,OAChCe,QAAQ,SAACM,GACTA,EAAEnB,OACPY,IAAIT,IAtCT,SAAmBH,GACxB,GAAqB,WAAjBoB,OAAAC,EAAA,EAAAD,CAAOpB,GAAoB,MAAO,GACtC,GAA8B,iBAAnBA,EAAME,SAAuB,OAAOF,EAAMsB,QAAQ,WAAY,GAAI,IAAIA,QAAQ,IAAK,KAAKC,cACnG,IAAMC,EAAIC,IAAIC,MAAM1B,EAAME,UAC1B,OAAOyB,IAAKC,SAASJ,EAAEK,UAkCLC,CAAUX,GAAlBC,OAAAW,EAAA,EAAAX,CAAA,CACEzB,MACAoB,OACAE,YACAC,WACGC,UAKJP,IAAI/B,IAAI6B,+CC3ErB,aCA6LsB,ECe7L,CACAC,KAAA,gBACAC,KAAA,CACAC,MAAA,kDACAC,KAAA,CACA,CAAAC,IAAA,WAAAC,SAAA,WAAAC,QAAA,oDACA,CAAAF,IAAA,cAAAJ,KAAA,cAAAM,QAAA,kEAGAC,WAAA,CACAC,cAAA,kBAAAC,EAAAvB,EAAA,IAAApC,KAAA2D,EAAAC,KAAA,YACAC,WAAA,kBAAAF,EAAAvB,EAAA,GAAApC,KAAA2D,EAAAC,KAAA,aAEAE,UAbA,WAcA,OAAAzB,OAAA0B,EAAA,EAAA1B,IAEAlC,KAhBA,WAiBA,OACAD,KAAA,cC1BA8D,UAAgB3B,OAAA4B,EAAA,EAAA5B,CACdY,EHRF,WAA0B,IAAaiB,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,QAAkBE,YAAA,iBAA4B,CAAAF,EAAA,eAAoBG,MAAA,CAAOpB,MAAA,cAAxIe,KAA4JM,GAAA,KAAAJ,EAAA,OAAwBE,YAAA,aAAwB,CAA5MJ,KAA4MjE,KAAAwE,OAAA,EAAAL,EAAA,kBAA6CG,MAAA,CAAOtE,KAAhQiE,KAAgQjE,QAAhQiE,KAAiRQ,MAAA,QAC3S,IGUA,EACA,KACA,KACA,MAIeC,EAAA,QAAAZ","file":"630496d947ccd060b242.js","sourcesContent":["import axios from 'axios';\nimport path from 'path';\nimport url from 'url';\nimport flatMap from 'lodash.flatmap';\n\nexport default function fetchDays() {\n  // Use import local data\n  if (process.server && process.env.NUXT_MODE === 'generate') {\n    // eslint-disable-next-line\n    return Promise.resolve(require('../static/data/timetable.json'));\n  }\n\n  return axios.get(process.client && process.env.NODE_ENV === 'production' ? process.env.PUBLIC_TIMETABLE_URL : process.env.TIMETABLE_URL)\n    .then(({ data: { days } }) => ({ days }));\n}\n\nexport function fetchEventInfo() {\n  // Use import local data\n  if (process.server && process.env.NUXT_MODE === 'generate') {\n    // eslint-disable-next-line\n    return Promise.resolve(require('../static/data/event_info.json'));\n  }\n\n  return axios.get(process.client && process.env.NODE_ENV === 'production' ? process.env.PUBLIC_EVENT_INFO_URL : process.env.EVENT_INFO_URL)\n    .then(({ data: { conference } }) => ({ conference }));\n}\n\nexport function topicSlug(topic) {\n  if (typeof topic !== 'object') return '';\n  if (typeof topic.internal !== 'string') return topic.replace(/[^_\\W]+/g, '', '').replace(' ', '-').toLowerCase();\n  const u = url.parse(topic.internal);\n  return path.basename(u.pathname);\n}\n\nexport function fetchTopics() {\n  return fetchDays()\n    .then(({ days }) => {\n      const keys = new Map();\n      return flatMap(\n        days,\n        day => flatMap(day.timeslots, ({ events }) => events),\n      )\n        .filter((topic) => {\n          if (!topic || !topic.topic) {\n            return false;\n          }\n\n          if (keys.has(topic.internal)) {\n            return false;\n          }\n          keys.set(topic.internal, true);\n          return true;\n        })\n        .sort((left, right) => left.display.localeCompare(right.display));\n    });\n}\n\nexport function fetchTopicById(id) {\n  return fetchDays()\n    .then(({ days }) => {\n      const map = new Map();\n      days.forEach(({ day, date, timeslots }) => {\n        timeslots.forEach(({ startTime, endTime, events }) => {\n          events.forEach((e) => {\n            if (!e.topic) return;\n            map.set(topicSlug(e), {\n              day,\n              date,\n              startTime,\n              endTime,\n              ...e,\n            });\n          });\n        });\n      });\n      return map.get(id);\n    });\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"timetablePage\"},[_c('page-banner',{attrs:{\"title\":\"Schedule\"}}),_vm._v(\" \"),_c('div',{staticClass:\"container\"},[(_vm.days.length > 0)?_c('schedule-table',{attrs:{\"days\":_vm.days}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./timetable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./timetable.vue?vue&type=script&lang=js&\"","<template>\n  <main class=\"timetablePage\">\n    <page-banner title=\"Schedule\" />\n    <div class=\"container\">\n      <schedule-table\n        v-if=\"days.length > 0\"\n        :days=\"days\"\n      />\n    </div>\n  </main>\n</template>\n\n<script>\nimport fetchTopic from '../utils/fetchTopic';\n\nexport default {\n  name: 'TimetablePage',\n  head: {\n    title: 'Schedule | Hong Kong Open Source Confernce 2020',\n    meta: [\n      { hid: 'og:title', property: 'og:title', content: 'Schedule | Hong Kong Open Source Conference 2020' },\n      { hid: 'description', name: 'description', content: 'The timetable for the Hong Kong Open Source Conference 2020.' },\n    ],\n  },\n  components: {\n    ScheduleTable: () => import('~/components/timetable/ScheduleTable.vue'),\n    PageBanner: () => import('~/components/PageBanner.vue'),\n  },\n  asyncData() {\n    return fetchTopic();\n  },\n  data() {\n    return {\n      days: [],\n    };\n  },\n};\n</script>\n","import { render, staticRenderFns } from \"./timetable.vue?vue&type=template&id=5ec18351&\"\nimport script from \"./timetable.vue?vue&type=script&lang=js&\"\nexport * from \"./timetable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}